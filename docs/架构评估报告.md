# Vue3ç®¡ç†ç³»ç»Ÿ - æŠ€æœ¯æ¶æ„è¯„ä¼°æŠ¥å‘Š

## ğŸ“‹ æ‰§è¡Œæ‘˜è¦

æœ¬æŠ¥å‘Šé’ˆå¯¹å½“å‰Vue3ç®¡ç†ç³»ç»Ÿè¿›è¡Œå…¨é¢æŠ€æœ¯æ¶æ„è¯„ä¼°,è¯†åˆ«ä¼˜åŠ¿ã€é—®é¢˜å’Œæ”¹è¿›æœºä¼š,å¹¶æä¾›å¯æ‰§è¡Œçš„ä¼˜åŒ–è·¯çº¿å›¾ã€‚

---

## ğŸ¯ æŠ€æœ¯æ ˆæ¦‚è§ˆ

### æ ¸å¿ƒæŠ€æœ¯
- **å‰ç«¯æ¡†æ¶**: Vue 3.5.13 + TypeScript 5.6.3
- **æ„å»ºå·¥å…·**: Vite 6.0.1
- **UIæ¡†æ¶**: Element Plus
- **çŠ¶æ€ç®¡ç†**: Pinia
- **è·¯ç”±**: Vue Router
- **HTTPå®¢æˆ·ç«¯**: Axios

### å·¥ç¨‹åŒ–å·¥å…·
- ESLint (@antfu/eslint-config)
- UnoCSS (åŸå­åŒ–CSS)
- VueUse (ç»„åˆå¼å·¥å…·é›†)
- Dayjs (æ—¥æœŸå¤„ç†)

---

## âœ… æ¶æ„ä¼˜åŠ¿

### 1. ç°ä»£åŒ–æŠ€æœ¯é€‰å‹
- ä½¿ç”¨æœ€æ–°çš„Vue 3 Composition API
- å®Œæ•´çš„TypeScriptç±»å‹ç³»ç»Ÿ
- Viteæ„å»ºå·¥å…·æä¾›æé€Ÿçš„å¼€å‘ä½“éªŒ

### 2. ä¼˜ç§€çš„ä»£ç ç»„ç»‡
```
src/domains/
â”œâ”€â”€ auth/          # è®¤è¯åŸŸ
â”œâ”€â”€ user/          # ç”¨æˆ·åŸŸ
â””â”€â”€ infrastructure/ # åŸºç¡€è®¾æ–½åŸŸ
```
é‡‡ç”¨é¢†åŸŸé©±åŠ¨è®¾è®¡(DDD)æ€æƒ³,æŒ‰ä¸šåŠ¡åŠŸèƒ½åˆ’åˆ†ä»£ç ç»“æ„,ä¾¿äºç»´æŠ¤å’Œæ‰©å±•ã€‚

### 3. å®Œå–„çš„ä¸»é¢˜ç³»ç»Ÿ
```typescript
// æ”¯æŒåŠŸèƒ½
- æš—é»‘/æ˜äº®/è‡ªåŠ¨ä¸»é¢˜åˆ‡æ¢
- å¤šç§é¢œè‰²æ–¹æ¡ˆ(default/blue/green/purple/orange/red)
- è‡ªå®šä¹‰ä¸»è‰²è°ƒ
- å“åº”å¼å¸ƒå±€(mobile/tablet/desktop)
- æ— éšœç¢è®¿é—®(é«˜å¯¹æ¯”åº¦ã€å‡å°‘åŠ¨ç”»)
- ä¾§è¾¹æ æŠ˜å ã€ç´§å‡‘æ¨¡å¼
```

### 4. ç§»åŠ¨ç«¯é€‚é…
```typescript
const BREAKPOINTS = {
  mobile: 768,
  tablet: 1024,
  desktop: 1200,
}
```
å®Œæ•´çš„æ–­ç‚¹ç³»ç»Ÿ,è‡ªåŠ¨å¤„ç†è®¾å¤‡ç±»å‹æ£€æµ‹å’Œå±å¹•æ–¹å‘å˜åŒ–ã€‚

---

## âš ï¸ å‘ç°çš„é—®é¢˜

### ğŸ”´ é«˜ä¼˜å…ˆçº§é—®é¢˜

#### 1. Tokenå­˜å‚¨ç­–ç•¥ä¸ä¸€è‡´
**é—®é¢˜æè¿°:**
```typescript
// å¤šå¤„ä½¿ç”¨ä¸åŒçš„key
localStorage.getItem('token')              // authStore.ts
localStorage.getItem('super-admin-token')  // httpClient
localStorage.getItem('refreshToken')       // authStore.ts
```

**å½±å“**: è®¤è¯ç³»ç»Ÿæ··ä¹±,å¯èƒ½å¯¼è‡´tokenä¸¢å¤±æˆ–è·å–é”™è¯¯

**è§£å†³æ–¹æ¡ˆ:**
```typescript
// åˆ›å»ºç»Ÿä¸€çš„Tokenç®¡ç†å™¨
class TokenManager {
  private static readonly TOKEN_KEY = 'auth_token'
  private static readonly REFRESH_TOKEN_KEY = 'refresh_token'
  
  static setToken(token: string, refreshToken?: string) {
    localStorage.setItem(this.TOKEN_KEY, token)
    if (refreshToken) {
      localStorage.setItem(this.REFRESH_TOKEN_KEY, refreshToken)
    }
  }
  
  static getToken(): string | null {
    return localStorage.getItem(this.TOKEN_KEY)
  }
  
  static getRefreshToken(): string | null {
    return localStorage.getItem(this.REFRESH_TOKEN_KEY)
  }
  
  static clearAll() {
    localStorage.removeItem(this.TOKEN_KEY)
    localStorage.removeItem(this.REFRESH_TOKEN_KEY)
  }
}
```

#### 2. HTTPå“åº”æ‹¦æˆªå™¨å®ç°é”™è¯¯
**é—®é¢˜æè¿°:**
```typescript
// å½“å‰å®ç°
httpClient.interceptors.response.use(
  (response: AxiosResponse<ApiResponse>) => {
    return response; // âŒ è¿”å›æ•´ä¸ªresponseå¯¹è±¡
  }
);
```

**å½±å“**: ä¸šåŠ¡ä»£ç éœ€è¦è®¿é—®`response.data.data`,å¢åŠ å¤æ‚åº¦

**è§£å†³æ–¹æ¡ˆ:**
```typescript
httpClient.interceptors.response.use(
  (response: AxiosResponse<ApiResponse>) => {
    const { data } = response;
    
    // ç»Ÿä¸€å¤„ç†ä¸šåŠ¡çŠ¶æ€ç 
    if (data.code !== 200) {
      ElMessage.error(data.message || 'è¯·æ±‚å¤±è´¥');
      return Promise.reject(new Error(data.message));
    }
    
    return data.data; // âœ… ç›´æ¥è¿”å›ä¸šåŠ¡æ•°æ®
  },
  (error: AxiosError) => {
    // é”™è¯¯å¤„ç†...
    return Promise.reject(error);
  }
);
```

#### 3. ç¼ºå°‘ä»¤ç‰Œè‡ªåŠ¨åˆ·æ–°æœºåˆ¶
**é—®é¢˜æè¿°:** 
å½“access tokenè¿‡æœŸæ—¶,ç›´æ¥è·³è½¬ç™»å½•é¡µ,æ²¡æœ‰å°è¯•ä½¿ç”¨refresh tokenåˆ·æ–°

**å½±å“**: ç”¨æˆ·ä½“éªŒå·®,éœ€è¦é¢‘ç¹é‡æ–°ç™»å½•

**è§£å†³æ–¹æ¡ˆ:**
```typescript
let isRefreshing = false;
let failedQueue: any[] = [];

const processQueue = (error: any, token: string | null = null) => {
  failedQueue.forEach(prom => {
    if (error) {
      prom.reject(error);
    } else {
      prom.resolve(token);
    }
  });
  failedQueue = [];
};

httpClient.interceptors.response.use(
  response => response,
  async (error: AxiosError) => {
    const originalRequest = error.config;
    
    if (error.response?.status === 401 && !originalRequest._retry) {
      if (isRefreshing) {
        // æ­£åœ¨åˆ·æ–°token,å°†è¯·æ±‚åŠ å…¥é˜Ÿåˆ—
        return new Promise((resolve, reject) => {
          failedQueue.push({ resolve, reject });
        }).then(token => {
          originalRequest.headers['Authorization'] = 'Bearer ' + token;
          return httpClient(originalRequest);
        });
      }

      originalRequest._retry = true;
      isRefreshing = true;

      const refreshToken = TokenManager.getRefreshToken();
      if (!refreshToken) {
        router.push('/login');
        return Promise.reject(error);
      }

      try {
        const response = await authService.refreshToken(refreshToken);
        const newToken = response.token;
        
        TokenManager.setToken(newToken, response.refreshToken);
        processQueue(null, newToken);
        
        originalRequest.headers['Authorization'] = 'Bearer ' + newToken;
        return httpClient(originalRequest);
      } catch (refreshError) {
        processQueue(refreshError, null);
        TokenManager.clearAll();
        router.push('/login');
        return Promise.reject(refreshError);
      } finally {
        isRefreshing = false;
      }
    }
    
    return Promise.reject(error);
  }
);
```

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§é—®é¢˜

#### 4. Storeè®¾è®¡é£æ ¼ä¸ç»Ÿä¸€
**é—®é¢˜æè¿°:**
- `authStore.ts`: ä½¿ç”¨Options APIé£æ ¼
- `userStore.ts`: ä½¿ç”¨Composition APIé£æ ¼

**å»ºè®®:** ç»Ÿä¸€ä¸ºComposition APIé£æ ¼,è·å¾—æ›´å¥½çš„ç±»å‹æ¨å¯¼å’Œä»£ç å¤ç”¨

#### 5. æœªå®ç°è·¯ç”±æ‡’åŠ è½½
**é—®é¢˜æè¿°:** æ‰€æœ‰è·¯ç”±ç»„ä»¶éƒ½æ˜¯åŒæ­¥å¯¼å…¥,å¯¼è‡´é¦–å±åŠ è½½æ—¶é—´é•¿

**è§£å†³æ–¹æ¡ˆ:**
```typescript
const routes = [
  {
    path: '/users',
    name: 'UserList',
    component: () => import('@/domains/user/views/UserList.vue'),
    meta: { requiresAuth: true }
  }
]
```

#### 6. ç¼ºå°‘å…¨å±€é”™è¯¯å¤„ç†
**é—®é¢˜æè¿°:** æ²¡æœ‰æ•è·Vueç»„ä»¶è¿è¡Œæ—¶é”™è¯¯

**è§£å†³æ–¹æ¡ˆ:**
```typescript
// main.ts
app.config.errorHandler = (err, instance, info) => {
  console.error('å…¨å±€é”™è¯¯:', err);
  logService.error('Vueè¿è¡Œæ—¶é”™è¯¯', {
    error: err,
    componentName: instance?.$options.name,
    info
  });
  
  ElMessage.error('ç³»ç»Ÿé”™è¯¯,è¯·ç¨åé‡è¯•');
};

app.config.warnHandler = (msg, instance, trace) => {
  console.warn('Vueè­¦å‘Š:', msg);
};
```

#### 7. ç±»å‹å®šä¹‰ä¸å®Œæ•´
**é—®é¢˜æè¿°:** HTTPå“åº”ç±»å‹ç¼ºå°‘æ³›å‹æ”¯æŒ

**è§£å†³æ–¹æ¡ˆ:**
```typescript
interface ApiResponse<T = any> {
  code: number;
  message: string;
  data: T;
  timestamp?: number;
}

// ä½¿ç”¨ç¤ºä¾‹
const getUsers = (): Promise<User[]> => {
  return httpClient.get<ApiResponse<User[]>>('/api/users')
    .then(res => res.data);
};
```

### ğŸŸ¢ ä½ä¼˜å…ˆçº§é—®é¢˜

#### 8. æ€§èƒ½ä¼˜åŒ–ç©ºé—´
- ç¼ºå°‘ç»„ä»¶çº§ä»£ç åˆ†å‰²
- æœªå®ç°è™šæ‹Ÿæ»šåŠ¨(å¤§åˆ—è¡¨åœºæ™¯)
- å›¾ç‰‡æœªæ‡’åŠ è½½
- æ‰“åŒ…ä½“ç§¯å¯è¿›ä¸€æ­¥ä¼˜åŒ–

#### 9. ç¼ºå°‘å•å…ƒæµ‹è¯•
- æ— æµ‹è¯•è¦†ç›–ç‡
- å»ºè®®æ·»åŠ Vitestè¿›è¡Œå•å…ƒæµ‹è¯•

---

## ğŸ“Š æ•°æ®åº“è®¾è®¡æ–¹æ¡ˆ

### ERå›¾

```mermaid
erDiagram
    USERS ||--o{ USER_ROLES : has
    USERS ||--o{ USER_ACTIVITIES : performs
    USERS ||--|| USER_PREFERENCES : has
    
    USERS {
        bigint id PK
        varchar username UK
        varchar email UK
        varchar password_hash
        varchar nickname
        varchar avatar
        varchar phone
        tinyint status
        datetime created_at
        datetime updated_at
        datetime deleted_at
        datetime last_login_at
        varchar last_login_ip
    }
    
    ROLES ||--o{ USER_ROLES : assigned
    ROLES ||--o{ ROLE_PERMISSIONS : has
    
    ROLES {
        int id PK
        varchar code UK
        varchar name
        text description
        tinyint status
        int sort_order
        datetime created_at
        datetime updated_at
    }
    
    USER_ROLES {
        bigint id PK
        bigint user_id FK
        int role_id FK
        datetime assigned_at
        bigint assigned_by
    }
    
    PERMISSIONS ||--o{ ROLE_PERMISSIONS : granted
    
    PERMISSIONS {
        int id PK
        varchar code UK
        varchar name
        varchar resource
        varchar action
        varchar type
        int parent_id
        datetime created_at
    }
    
    ROLE_PERMISSIONS {
        bigint id PK
        int role_id FK
        int permission_id FK
        datetime granted_at
        bigint granted_by
    }
    
    USER_ACTIVITIES {
        bigint id PK
        bigint user_id FK
        varchar action_type
        varchar module
        text description
        json metadata
        varchar ip_address
        varchar user_agent
        datetime created_at
    }
    
    USER_PREFERENCES {
        bigint user_id PK,FK
        varchar theme
        varchar language
        varchar timezone
        json notification_settings
        json display_settings
        datetime updated_at
    }
    
    REFRESH_TOKENS {
        bigint id PK
        bigint user_id FK
        varchar token UK
        datetime expires_at
        datetime created_at
        varchar ip_address
        varchar user_agent
    }
    
    USERS ||--o{ REFRESH_TOKENS : has
```

### æ ¸å¿ƒè¡¨è®¾è®¡

#### 1. users - ç”¨æˆ·è¡¨
```sql
CREATE TABLE users (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  username VARCHAR(50) UNIQUE NOT NULL,
  email VARCHAR(100) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  nickname VARCHAR(50),
  avatar VARCHAR(255),
  phone VARCHAR(20),
  status TINYINT DEFAULT 1 COMMENT '1:æ­£å¸¸ 0:ç¦ç”¨',
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  deleted_at DATETIME NULL,
  last_login_at DATETIME,
  last_login_ip VARCHAR(45),
  INDEX idx_username (username),
  INDEX idx_email (email),
  INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

#### 2. roles - è§’è‰²è¡¨
```sql
CREATE TABLE roles (
  id INT PRIMARY KEY AUTO_INCREMENT,
  code VARCHAR(50) UNIQUE NOT NULL,
  name VARCHAR(50) NOT NULL,
  description TEXT,
  status TINYINT DEFAULT 1,
  sort_order INT DEFAULT 0,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  updated_at DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  INDEX idx_code (code),
  INDEX idx_status (status)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

#### 3. permissions - æƒé™è¡¨
```sql
CREATE TABLE permissions (
  id INT PRIMARY KEY AUTO_INCREMENT,
  code VARCHAR(100) UNIQUE NOT NULL,
  name VARCHAR(50) NOT NULL,
  resource VARCHAR(100),
  action VARCHAR(50),
  type VARCHAR(20) COMMENT 'menu/button/api',
  parent_id INT DEFAULT 0,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  INDEX idx_code (code),
  INDEX idx_type (type),
  INDEX idx_parent_id (parent_id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

#### 4. refresh_tokens - åˆ·æ–°ä»¤ç‰Œè¡¨
```sql
CREATE TABLE refresh_tokens (
  id BIGINT PRIMARY KEY AUTO_INCREMENT,
  user_id BIGINT NOT NULL,
  token VARCHAR(500) UNIQUE NOT NULL,
  expires_at DATETIME NOT NULL,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  ip_address VARCHAR(45),
  user_agent VARCHAR(255),
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  INDEX idx_user_id (user_id),
  INDEX idx_token (token),
  INDEX idx_expires_at (expires_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
```

---

## ğŸ—ï¸ åç«¯APIæ¶æ„å»ºè®®

### ç³»ç»Ÿæ¶æ„å›¾

```mermaid
graph TB
    Client[Vue3å‰ç«¯åº”ç”¨] --> Gateway[Nginx/API Gateway]
    
    Gateway --> AuthAPI[è®¤è¯æœåŠ¡ :3001]
    Gateway --> UserAPI[ç”¨æˆ·æœåŠ¡ :3002]
    Gateway --> AdminAPI[ç®¡ç†æœåŠ¡ :3003]
    
    AuthAPI --> MySQL[(MySQLä¸»åº“)]
    UserAPI --> MySQL
    AdminAPI --> MySQL
    
    AuthAPI --> Redis[(Redisç¼“å­˜)]
    UserAPI --> Redis
    AdminAPI --> Redis
    
    MySQL --> MySQLSlave[(MySQLä»åº“)]
    
    subgraph ä¸­é—´ä»¶å±‚
        RateLimit[è¯·æ±‚é™æµ]
        JWTAuth[JWTéªŒè¯]
        Logger[æ—¥å¿—è®°å½•]
        CORS[è·¨åŸŸå¤„ç†]
        Validator[å‚æ•°éªŒè¯]
    end
    
    Gateway --> RateLimit
    RateLimit --> JWTAuth
    JWTAuth --> Logger
    Logger --> CORS
    CORS --> Validator
```

### APIç«¯ç‚¹è®¾è®¡

#### è®¤è¯ç›¸å…³
```
POST   /api/auth/login           # ç”¨æˆ·ç™»å½•
POST   /api/auth/logout          # ç”¨æˆ·ç™»å‡º
POST   /api/auth/refresh         # åˆ·æ–°ä»¤ç‰Œ
POST   /api/auth/register        # ç”¨æˆ·æ³¨å†Œ
POST   /api/auth/forgot-password # å¿˜è®°å¯†ç 
POST   /api/auth/reset-password  # é‡ç½®å¯†ç 
GET    /api/auth/verify-email    # é‚®ç®±éªŒè¯
```

#### ç”¨æˆ·ç›¸å…³
```
GET    /api/users/profile        # è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
PUT    /api/users/profile        # æ›´æ–°ç”¨æˆ·ä¿¡æ¯
POST   /api/users/avatar         # ä¸Šä¼ å¤´åƒ
GET    /api/users/preferences    # è·å–ç”¨æˆ·åå¥½
PUT    /api/users/preferences    # æ›´æ–°ç”¨æˆ·åå¥½
GET    /api/users/activities     # è·å–æ´»åŠ¨è®°å½•
GET    /api/users/stats          # è·å–ç»Ÿè®¡ä¿¡æ¯
POST   /api/users/change-password # ä¿®æ”¹å¯†ç 
DELETE /api/users/account        # åˆ é™¤è´¦æˆ·
```

#### ç®¡ç†å‘˜ç›¸å…³
```
GET    /api/admin/users          # ç”¨æˆ·åˆ—è¡¨
GET    /api/admin/users/:id      # ç”¨æˆ·è¯¦æƒ…
POST   /api/admin/users          # åˆ›å»ºç”¨æˆ·
PUT    /api/admin/users/:id      # æ›´æ–°ç”¨æˆ·
DELETE /api/admin/users/:id      # åˆ é™¤ç”¨æˆ·
POST   /api/admin/users/:id/ban  # å°ç¦ç”¨æˆ·

GET    /api/admin/roles          # è§’è‰²åˆ—è¡¨
POST   /api/admin/roles          # åˆ›å»ºè§’è‰²
PUT    /api/admin/roles/:id      # æ›´æ–°è§’è‰²
DELETE /api/admin/roles/:id      # åˆ é™¤è§’è‰²

GET    /api/admin/permissions    # æƒé™åˆ—è¡¨
```

### å“åº”æ ¼å¼è§„èŒƒ

```typescript
// æˆåŠŸå“åº”
{
  "code": 200,
  "message": "success",
  "data": { /* ä¸šåŠ¡æ•°æ® */ },
  "timestamp": 1698765432000
}

// é”™è¯¯å“åº”
{
  "code": 400,
  "message": "å‚æ•°é”™è¯¯",
  "errors": [
    { "field": "username", "message": "ç”¨æˆ·åä¸èƒ½ä¸ºç©º" }
  ],
  "timestamp": 1698765432000
}

// åˆ†é¡µå“åº”
{
  "code": 200,
  "message": "success",
  "data": {
    "items": [ /* æ•°æ®åˆ—è¡¨ */ ],
    "total": 100,
    "page": 1,
    "pageSize": 20,
    "totalPages": 5
  },
  "timestamp": 1698765432000
}
```

---

## ğŸš€ ä¼˜åŒ–å®æ–½è·¯çº¿å›¾

### é˜¶æ®µä¸€: ç´§æ€¥ä¿®å¤ (1-2å¤©)

#### ä»»åŠ¡æ¸…å•
- [ ] åˆ›å»ºç»Ÿä¸€çš„TokenManagerå·¥å…·ç±»
- [ ] é‡æ„authStoreå’ŒhttpClientä½¿ç”¨ç»Ÿä¸€çš„tokenç®¡ç†
- [ ] ä¿®å¤HTTPå“åº”æ‹¦æˆªå™¨è¿”å›å€¼é—®é¢˜
- [ ] æ·»åŠ ç±»å‹å®šä¹‰æ–‡ä»¶æ”¹è¿›
- [ ] æ›´æ–°ç›¸å…³å•å…ƒæµ‹è¯•(å¦‚æœæœ‰)

#### éªŒæ”¶æ ‡å‡†
- [ ] æ‰€æœ‰tokenæ“ä½œä½¿ç”¨TokenManager
- [ ] HTTPæ‹¦æˆªå™¨è¿”å›æ­£ç¡®çš„æ•°æ®ç»“æ„
- [ ] TypeScriptç¼–è¯‘æ— é”™è¯¯
- [ ] ç™»å½•/ç™»å‡ºåŠŸèƒ½æ­£å¸¸

---

### é˜¶æ®µäºŒ: æ¶æ„ä¼˜åŒ– (3-5å¤©)

#### ä»»åŠ¡æ¸…å•
- [ ] å®ç°ä»¤ç‰Œè‡ªåŠ¨åˆ·æ–°æœºåˆ¶
  - [ ] æ·»åŠ åˆ·æ–°tokençš„è¯·æ±‚é˜Ÿåˆ—
  - [ ] å®ç°401æ‹¦æˆªå™¨é€»è¾‘
  - [ ] æ·»åŠ tokenè¿‡æœŸæ—¶é—´ç®¡ç†
- [ ] å®ç°è·¯ç”±æ‡’åŠ è½½
  - [ ] æ”¹é€ è·¯ç”±é…ç½®ä¸ºåŠ¨æ€å¯¼å…¥
  - [ ] æ·»åŠ è·¯ç”±åŠ è½½è¿›åº¦æ¡
- [ ] æ·»åŠ å…¨å±€é”™è¯¯å¤„ç†
  - [ ] Vueé”™è¯¯æ•è·
  - [ ] Promise rejectionå¤„ç†
  - [ ] é”™è¯¯ä¸ŠæŠ¥æœºåˆ¶
- [ ] ç»Ÿä¸€Storeé£æ ¼ä¸ºComposition API
  - [ ] é‡æ„authStore
  - [ ] ä¼˜åŒ–ç±»å‹å®šä¹‰

#### éªŒæ”¶æ ‡å‡†
- [ ] Tokenè¿‡æœŸè‡ªåŠ¨åˆ·æ–°,æ— éœ€é‡æ–°ç™»å½•
- [ ] è·¯ç”±æŒ‰éœ€åŠ è½½,é¦–å±ä½“ç§¯å‡å°‘
- [ ] é”™è¯¯ç»Ÿä¸€å¤„ç†å’Œä¸ŠæŠ¥
- [ ] Storeä»£ç é£æ ¼ä¸€è‡´

---

### é˜¶æ®µä¸‰: æ€§èƒ½ä¼˜åŒ– (3-5å¤©)

#### ä»»åŠ¡æ¸…å•
- [ ] ç»„ä»¶çº§ä»£ç åˆ†å‰²
  - [ ] è¯†åˆ«å¤§å‹ç»„ä»¶è¿›è¡Œæ‹†åˆ†
  - [ ] ä½¿ç”¨defineAsyncComponent
- [ ] å®ç°è™šæ‹Ÿæ»šåŠ¨(å¤§åˆ—è¡¨åœºæ™¯)
  - [ ] é›†æˆvue-virtual-scroller
  - [ ] æ”¹é€ ç”¨æˆ·åˆ—è¡¨ç­‰å¤§æ•°æ®ç»„ä»¶
- [ ] å›¾ç‰‡æ‡’åŠ è½½
  - [ ] ä½¿ç”¨VueUseçš„useIntersectionObserver
  - [ ] æ·»åŠ å ä½å›¾
- [ ] æ‰“åŒ…ä¼˜åŒ–
  - [ ] åˆ†ææ‰“åŒ…ä½“ç§¯
  - [ ] é…ç½®Chunkåˆ†å‰²ç­–ç•¥
  - [ ] å‹ç¼©å’ŒTree Shakingä¼˜åŒ–
  - [ ] å¯ç”¨Gzip/Brotliå‹ç¼©

#### éªŒæ”¶æ ‡å‡†
- [ ] é¦–å±åŠ è½½æ—¶é—´ < 3ç§’
- [ ] æ‰“åŒ…ä½“ç§¯å‡å°‘30%ä»¥ä¸Š
- [ ] Lighthouseæ€§èƒ½åˆ†æ•° > 90
- [ ] å¤§åˆ—è¡¨æ»šåŠ¨æµç•…(60fps)

---

### é˜¶æ®µå››: åç«¯å¼€å‘ (1-2å‘¨)

#### ä»»åŠ¡æ¸…å•
- [ ] æ•°æ®åº“è®¾è®¡ä¸è¿ç§»
  - [ ] åˆ›å»ºæ•°æ®åº“schema
  - [ ] ç¼–å†™åˆå§‹åŒ–è„šæœ¬
  - [ ] å‡†å¤‡ç§å­æ•°æ®
- [ ] è®¤è¯ç³»ç»Ÿå¼€å‘
  - [ ] JWTç”Ÿæˆä¸éªŒè¯
  - [ ] åˆ·æ–°ä»¤ç‰Œæœºåˆ¶
  - [ ] å¯†ç åŠ å¯†å­˜å‚¨
- [ ] ç”¨æˆ·ç®¡ç†API
  - [ ] CRUDæ¥å£
  - [ ] å¤´åƒä¸Šä¼ 
  - [ ] åå¥½è®¾ç½®
- [ ] æƒé™ç³»ç»Ÿ
  - [ ] RBACå®ç°
  - [ ] æƒé™éªŒè¯ä¸­é—´ä»¶
- [ ] APIæ–‡æ¡£
  - [ ] Swagger/OpenAPIæ–‡æ¡£
  - [ ] æ¥å£æµ‹è¯•

#### éªŒæ”¶æ ‡å‡†
- [ ] æ‰€æœ‰APIæ¥å£æ­£å¸¸å·¥ä½œ
- [ ] æ¥å£å“åº”æ—¶é—´ < 200ms
- [ ] å®‰å…¨æ€§æµ‹è¯•é€šè¿‡
- [ ] APIæ–‡æ¡£å®Œæ•´

---

## ğŸ“ˆ æŠ€æœ¯é£é™©è¯„ä¼°

| é£é™©é¡¹ | ä¸¥é‡ç¨‹åº¦ | å¯èƒ½æ€§ | å½±å“èŒƒå›´ | ç¼“è§£æªæ–½ |
|--------|---------|--------|---------|---------|
| Tokenå­˜å‚¨ä¸ä¸€è‡´å¯¼è‡´è®¤è¯å¤±è´¥ | ğŸ”´ é«˜ | é«˜ | ç™»å½•/è®¤è¯ | ç«‹å³ç»Ÿä¸€Tokenç®¡ç† |
| ç¼ºå°‘ä»¤ç‰Œåˆ·æ–°å¯¼è‡´é¢‘ç¹ç™»å½• | ğŸ”´ é«˜ | é«˜ | ç”¨æˆ·ä½“éªŒ | å®ç°è‡ªåŠ¨åˆ·æ–°æœºåˆ¶ |
| HTTPå“åº”æ ¼å¼ä¸ç»Ÿä¸€ | ğŸŸ¡ ä¸­ | ä¸­ | æ•°æ®å¤„ç† | è§„èŒƒå“åº”æ‹¦æˆªå™¨ |
| Storeè®¾è®¡ä¸ç»Ÿä¸€ | ğŸŸ¡ ä¸­ | ä½ | ä»£ç ç»´æŠ¤ | é€æ­¥é‡æ„ä¸ºç»Ÿä¸€é£æ ¼ |
| æ€§èƒ½é—®é¢˜(é¦–å±æ…¢) | ğŸŸ¡ ä¸­ | ä¸­ | ç”¨æˆ·ä½“éªŒ | å®æ–½æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ |
| ç¼ºå°‘å•å…ƒæµ‹è¯• | ğŸŸ¢ ä½ | é«˜ | ä»£ç è´¨é‡ | è¡¥å……å…³é”®è·¯å¾„æµ‹è¯• |
| æ‰“åŒ…ä½“ç§¯è¿‡å¤§ | ğŸŸ¢ ä½ | ä¸­ | åŠ è½½é€Ÿåº¦ | ä¼˜åŒ–æ‰“åŒ…é…ç½® |

---

## ğŸ¯ å…³é”®æŒ‡æ ‡ç›®æ ‡

### æ€§èƒ½æŒ‡æ ‡
- **é¦–å±åŠ è½½æ—¶é—´**: < 3ç§’ (ç›®å‰çº¦5-6ç§’)
- **è·¯ç”±åˆ‡æ¢æ—¶é—´**: < 300ms
- **APIå“åº”æ—¶é—´**: < 200ms
- **æ‰“åŒ…ä½“ç§¯**: < 500KB (gzipå)
- **Lighthouseåˆ†æ•°**: > 90

### è´¨é‡æŒ‡æ ‡
- **TypeScriptè¦†ç›–ç‡**: 100%
- **å•å…ƒæµ‹è¯•è¦†ç›–ç‡**: > 80%
- **ä»£ç é‡å¤ç‡**: < 5%
- **å®‰å…¨æ¼æ´**: 0ä¸ªé«˜å±

### ç”¨æˆ·ä½“éªŒæŒ‡æ ‡
- **ç™»å½•æˆåŠŸç‡**: > 99%
- **Tokenåˆ·æ–°æˆåŠŸç‡**: > 95%
- **é¡µé¢é”™è¯¯ç‡**: < 0.1%

---

## ğŸ’¡ æœ€ä½³å®è·µå»ºè®®

### 1. ä»£ç è§„èŒƒ
```typescript
// âœ… æ¨è: ä½¿ç”¨Composition API
export const useAuthStore = defineStore('auth', () => {
  const token = ref<string | null>(null);
  const user = ref<User | null>(null);
  
  const login = async (credentials: LoginCredentials) => {
    // ...
  };
  
  return { token, user, login };
});

// âŒ é¿å…: Options API(é™¤éæœ‰ç‰¹æ®Šç†ç”±)
export const useAuthStore = defineStore('auth', {
  state: () => ({ token: null }),
  actions: { login() {} }
});
```

### 2. é”™è¯¯å¤„ç†
```typescript
// âœ… æ¨è: ç»Ÿä¸€é”™è¯¯å¤„ç†
try {
  await authService.login(credentials);
} catch (error) {
  if (error instanceof AuthError) {
    ElMessage.error(error.message);
  } else {
    logService.error('æœªçŸ¥é”™è¯¯', error);
    ElMessage.error('ç³»ç»Ÿé”™è¯¯,è¯·ç¨åé‡è¯•');
  }
}

// âŒ é¿å…: ç®€å•çš„console.error
try {
  await authService.login(credentials);
} catch (error) {
  console.error(error); // ä¸å¤Ÿå¥å£®
}
```

### 3. ç±»å‹å®‰å…¨
```typescript
// âœ… æ¨è: æ˜ç¡®çš„ç±»å‹å®šä¹‰
interface LoginResponse {
  token: string;
  refreshToken: string;
  user: User;
  expiresIn: number;
}

const login = (credentials: LoginCredentials): Promise<LoginResponse> => {
  return httpClient.post('/api/auth/login', credentials);
};

// âŒ é¿å…: ä½¿ç”¨any
const login = (credentials: any): Promise<any> => { ... }
```

### 4. æ€§èƒ½ä¼˜åŒ–
```typescript
// âœ… æ¨è: æ‡’åŠ è½½
const UserList = () => import('@/domains/user/views/UserList.vue');

// âŒ é¿å…: åŒæ­¥å¯¼å…¥å¤§ç»„ä»¶
import UserList from '@/domains/user/views/UserList.vue';
```

---

## ğŸ“š å‚è€ƒèµ„æ–™

- [Vue 3 å®˜æ–¹æ–‡æ¡£](https://vuejs.org/)
- [TypeScript å®˜æ–¹æ–‡æ¡£](https://www.typescriptlang.org/)
- [Vite å®˜æ–¹æ–‡æ¡£](https://vitejs.dev/)
- [Element Plus æ–‡æ¡£](https://element-plus.org/)
- [Pinia æ–‡æ¡£](https://pinia.vuejs.org/)
- [JWT æœ€ä½³å®è·µ](https://tools.ietf.org/html/rfc8725)
- [OWASP å®‰å…¨æŒ‡å—](https://owasp.org/www-project-top-ten/)

---

## ğŸ“ è”ç³»æ–¹å¼

å¦‚æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®,è¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»:

- é¡¹ç›®ä»“åº“: [GitHub](https://github.com/your-repo)
- æŠ€æœ¯æ–‡æ¡£: [Wiki](https://github.com/your-repo/wiki)
- é—®é¢˜åé¦ˆ: [Issues](https://github.com/your-repo/issues)

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-10-25  
**ç‰ˆæœ¬**: v1.0  
**çŠ¶æ€**: å¾…å®¡æ ¸